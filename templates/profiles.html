<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="static/index.css" type="text/css" />
    <link rel="stylesheet" href="static/profile.css" type="text/css" />
    <title>Profile Management</title>
</head>
<body>
    <h1>Profile Management</h1>
     <!-- Display Active Profile Information -->
     <div class="active-profile-info">
        <h2 style="text-align:center">Active Profile</h2>
        <p>Name: <strong>{{ active_profile.name if active_profile else 'None selected' }}</strong></p>
        <p>Current Soil Moisture Threshold: <strong>{{ active_profile.soil_moisture_threshold if active_profile else 'N/A' }}</strong></p>
    </div>

    
    <div style="display: flex; justify-content: center; align-items: center;">
        <form action="/select_profile" method="post">
            <label for="profile_selection">Select Profile:</label>
            <select name="profile_id" id="profile_selection">
                {% for profile in profiles %}
                    <option value="{{ profile['id'] }}" {% if profile['is_active'] == 1 %} selected {% endif %}>
                        {{ profile['name'] }}
                    </option>
                {% endfor %}
            </select>
            <button type="submit">Set Active Profile</button>
        </form>
    </div>
    <h2 style="text-align:center">Add Profiles</h2>
    <div style="display: flex; justify-content: center; align-items: center;">
        <form action="/update_profile" method="post">
            <label for="profile_name">Profile Name:</label>
            <input type="text" id="profile_name" name="profile_name" required>
            <label for="soil_moisture_threshold">Soil Moisture Threshold:</label>
            <input type="number" id="soil_moisture_threshold" name="soil_moisture_threshold" required>
            <button type="submit">Save Profile</button>
        </form>
    </div>
    <h2 style="text-align:center">Manage Profiles</h2>
    <table style="margin-left: auto; margin-right: auto;">
        <thead>
            <tr>
                <th>Profile Name</th>
                <th>Soil Moisture Threshold</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for profile in profiles %}
            <tr>
                <td>{{ profile['name'] }}</td>
                <td>{{ profile['soil_moisture_threshold'] }}</td>
                <td>
                    <form action="{{ url_for('delete_profile', profile_id=profile['id']) }}" method="post">
                        <button type="submit" onclick="return confirm('Are you sure you want to delete this profile?');">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    
    
    <br>


    <div class="button-container">
        <a href="/" class="button">Back to dashboard</a>
    </div>
    

</body>
</html>
